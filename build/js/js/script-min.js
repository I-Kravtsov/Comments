"use strict";let form=document.querySelector(".new-comment__form"),submitButton=document.querySelector(".new-comment__submit"),commentsList=document.querySelector(".comments__list");class Comment{constructor(e,t,n,m){this.name=e,this.time=t,this.date=n,this.text=m;let s=`\n            <p class="comment__name">\n                ${this.name}\n            </p>\n            <span class="comment__time">\n                ${this.time}\n            </span>\n            <span class="comment__date">\n                ${this.date} \n            </span>\n            <p class="comment__text">\n                ${this.text}\n            </p>\n        `;this.element=document.createElement("li"),this.element.className="comments__item comment",this.element.innerHTML=s,commentsList.prepend(this.element)}}function createComentsList(e){for(let t of e){new Comment(t.name,t.time,t.date,t.text)}}async function getCommentList(){let e=await fetch("./comments-list.php"),t=await e.json();t&&createComentsList(t)}function sendComment(){let e=new FormData(form),t=document.querySelector(".new-comment__name-field"),n=document.querySelector(".new-comment__text");fetch("./add_comment.php",{method:"post",body:e}).then(e=>e.text()).then(e=>{1==e?(commentsList.innerHTML="",t.value="",n.value="",getCommentList()):alert("произошла ошибка, побробуйте еще раз через какое-то время")})}getCommentList(),form.addEventListener("submit",e=>{e.preventDefault(),sendComment()});